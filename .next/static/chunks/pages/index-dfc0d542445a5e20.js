(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9168)}])},9168:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var r=n(5893),s=n(7294),a=n(7851),l=n(512);function cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m)((0,l.W)(t))}let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("label",{ref:t,className:cn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...s})});i.displayName="Label";var o=n(9904);function Switch(e){let{className:t,...n}=e;return(0,r.jsx)(o.r,{...n,className:e=>{let{checked:n}=e;return cn("relative inline-flex h-6 w-11 items-center rounded-full transition",n?"bg-primary":"bg-input",t)},children:e=>{let{checked:t}=e;return(0,r.jsx)("span",{className:cn("inline-block h-4 w-4 transform rounded-full bg-background transition",t?"translate-x-6":"translate-x-1")})}})}var c=n(2003);let d=(0,c.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:n,variant:s,size:a,...l}=e;return(0,r.jsx)("button",{className:cn(d({variant:s,size:a}),n),ref:t,...l})});u.displayName="Button";var m=n(2191),f=n(6117),g=n(9037);n(22);var h=n(3977),x=n(1259),p=n(9828);m.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(m.default.version,"/pdf.worker.min.js");let b=(0,h.ZF)({apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"}),v=(0,x.v0)(b),y=(0,p.ad)(b),w=new x.hJ;function Home(){let[e,t]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[b,j]=(0,s.useState)(""),[N,S]=(0,s.useState)(null),[_,D]=(0,s.useState)(null),[E,k]=(0,s.useState)(null),[R,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,x.Aj)(v,e=>{e&&(k(e),loadSession(e.uid))})},[]);let signIn=async()=>{try{let e=await (0,x.rh)(v,w);k(e.user),await loadSession(e.user.uid)}catch(e){console.error("Sign in error",e)}},loadSession=async e=>{let n=await (0,p.QT)((0,p.JU)(y,"sessions",e));if(n.exists()){let e=n.data();t(e.enabled||!1),S(e.output||null),d(e.fileName||"")}},saveSession=async()=>{E&&await (0,p.pl)((0,p.JU)(y,"sessions",E.uid),{enabled:e,output:N,fileName:c,timestamp:Date.now()})};return(0,r.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-6xl",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Thought-Unit Reader"}),!E&&(0,r.jsx)(u,{onClick:signIn,className:"mb-6 w-full bg-green-600 hover:bg-green-700",children:"Sign in with Google"}),E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)(i,{htmlFor:"toggleParser",className:"text-gray-700",children:"Enable Parser"}),(0,r.jsx)(Switch,{id:"toggleParser",checked:e,onCheckedChange:t})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("input",{type:"file",accept:".pdf,.docx,.txt",onChange:e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){d(n.name);let e=URL.createObjectURL(n);h(e);let t=new FileReader;t.onload=e=>{var t;let n=null===(t=e.target)||void 0===t?void 0:t.result;"string"==typeof n&&j(n)},t.readAsText(n)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),(0,r.jsx)(u,{onClick:()=>{if(!e||!b){console.log("Parser is disabled or file is empty.");return}o(!0),a(!1);let t=function(e){let t=["enzyme-substrate complex","rate-limiting step","Michaelis-Menten kinetics","signal transduction","glycolysis","DNA replication","RNA polymerase","oxidative phosphorylation"],n=e.replace(/\n/g," ").split(RegExp("(?<=[.!?])\\s+")).flatMap(e=>{for(let n of t)e=e.replace(RegExp(n,"gi"),"\xa7".concat(n,"\xa7"));return e.split(RegExp("(?=\xa7)|(?<=\xa7)"))}),r=!0;return n.map(e=>{let t=e.replace(/§/g,""),n=r?"black":"gray";return t.trim()?(r=!r,'<span style="color:'.concat(n,'">').concat(t.trim()," </span>")):""}).join("")}(b);setTimeout(()=>{S(t),a(!0),o(!1),saveSession(),setTimeout(()=>{let e=document.getElementById("thought-output");e&&e.scrollIntoView({behavior:"smooth"})},300)},800)},className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition",children:l?"Parsing...":"Start Parsing"}),b&&(0,r.jsxs)("div",{className:"my-6 bg-white p-4 rounded-xl shadow",children:[(0,r.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"\uD83D\uDCDA Table of Contents"}),(0,r.jsx)("ul",{className:"text-sm space-y-1 max-h-48 overflow-y-auto",children:Array.from(b.matchAll(/^(Chapter|Section|\d+(\.\d+)*)[^\n]{0,80}/gim)).map(e=>e[0].trim()).map((e,t)=>(0,r.jsxs)("li",{className:"text-blue-700",children:["\uD83D\uDD39 ",e]},t))})]}),n&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-green-100 text-green-800 rounded-xl",children:"✅ Parsing complete!"}),m&&(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl overflow-auto max-h-[80vh]",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDCD8 Original Book View"}),(0,r.jsx)(f.Z,{file:m,onLoadSuccess:e=>{let{numPages:t}=e;return D(t)},children:Array.from(Array(_),(e,t)=>(0,r.jsx)(g.Z,{pageNumber:t+1},"page_".concat(t+1)))})]}),(0,r.jsxs)("div",{id:"thought-output",className:"bg-white p-4 rounded-xl shadow-inner overflow-y-auto max-h-[80vh]",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"\uD83E\uDDE0 Thought-Unit Output"}),(0,r.jsx)(u,{onClick:()=>C(!R),children:R?"Disable Edit":"Improve Parser"})]}),(0,r.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap text-sm",contentEditable:R,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:N||"No output yet. Start the parser to generate content."}})]})]})]})]})})}},9349:function(){},9080:function(){},7588:function(){},3071:function(){},5232:function(){}},function(e){e.O(0,[774,701,16,257,573,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);